<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Subway Surfer Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            height: 100vh;
            background-color: #333;
        }

        #game {
            position: relative;
            width: 100%;
            height: 100%;
            perspective: 800px; /* Perspective for 3D effect */
        }

        #track {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            animation: moveTrack 5s linear infinite;
        }

        @keyframes moveTrack {
            0% { transform: translateZ(-500px); }
            100% { transform: translateZ(-2000px); }
        }

        .obstacle {
            position: absolute;
            top: -100px; 
            width: 33.33%; /* Each track will occupy a third of the screen */
            height: 50px;
            background-color: red;
            transform-origin: bottom;
            animation: obstacleAnimation 5s linear infinite;
        }

        @keyframes obstacleAnimation {
            0% { top: -100px; }
            100% { top: 100vh; }
        }

        #player {
            position: absolute;
            bottom: 20px;
            left: 33.33%; /* Starting at the center */
            width: 30%;
            height: 60px;
            background-color: blue;
            border-radius: 10px;
            transition: left 0.2s ease;
        }

        .player-jump {
            animation: playerJump 0.5s forwards;
        }

        @keyframes playerJump {
            0% { transform: translateY(0); }
            50% { transform: translateY(-120px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="track"></div>
        <div id="player"></div>
        <div id="score">Score: 0</div>
    </div>

    <script>
        const player = document.getElementById('player');
        const scoreElement = document.getElementById('score');
        const track = document.getElementById('track');
        let score = 0;
        let playerPosition = 1; // 0 = left, 1 = center, 2 = right
        let obstacles = [];
        let gameInterval;
        let speed = 3; // Speed of obstacles falling
        let isJumping = false;

        // Listen for key presses
        document.addEventListener('keydown', movePlayer);
        document.addEventListener('keydown', jumpPlayer);

        // Move player left or right
        function movePlayer(e) {
            if (e.key === 'ArrowLeft' && playerPosition > 0) {
                playerPosition--;
            } else if (e.key === 'ArrowRight' && playerPosition < 2) {
                playerPosition++;
            }
            player.style.left = `${playerPosition * 33.33}%`;
        }

        // Make player jump (if not already jumping)
        function jumpPlayer(e) {
            if (e.key === 'ArrowUp' && !isJumping) {
                isJumping = true;
                player.classList.add('player-jump');
                setTimeout(() => {
                    player.classList.remove('player-jump');
                    isJumping = false;
                }, 500);
            }
        }

        // Generate obstacles (trains)
        function generateObstacles() {
            let lanes = [];
            const numOfLanes = Math.floor(Math.random() * 2) + 1; // This will give 1 or 2 lanes

            while (lanes.length < numOfLanes) {
                const lane = Math.floor(Math.random() * 3); // Randomly choose between 0 (left), 1 (center), 2 (right)
                if (!lanes.includes(lane)) {
                    lanes.push(lane);
                }
            }

            // For each selected lane, create an obstacle
            lanes.forEach(lane => {
                const obstacle = document.createElement('div');
                obstacle.classList.add('obstacle');
                obstacle.style.left = `${lane * 33.33}%`; // 0 = left, 1 = center, 2 = right
                track.appendChild(obstacle);
                obstacles.push(obstacle);

                // Set obstacle speed and move it down
                obstacle.style.animationDuration = `${speed}s`;
            });
        }

        // Check for collisions
        function checkCollisions() {
            obstacles.forEach((obstacle, index) => {
                const obsLeft = obstacle.offsetLeft;
                const obsRight = obsLeft + obstacle.offsetWidth;
                const playerLeft = player.offsetLeft;
                const playerRight = playerLeft + player.offsetWidth;

                // Check if the player collides with the obstacle
                if (
                    player.offsetTop < obstacle.offsetTop + obstacle.offsetHeight &&
                    playerRight > obsLeft &&
                    playerLeft < obsRight
                ) {
                    endGame();
                }

                // Remove obstacles that are off-screen
                if (obstacle.offsetTop > window.innerHeight) {
                    obstacle.remove();
                    obstacles.splice(index, 1);
                }
            });
        }

        // Update score
        function updateScore() {
            score++;
            scoreElement.textContent = `Score: ${score}`;
        }

        // End the game
        function endGame() {
            clearInterval(gameInterval);
            alert(`Game Over! Your Score: ${score}`);
            resetGame();
        }

        // Reset the game state
        function resetGame() {
            score = 0;
            playerPosition = 1;
            player.style.left = '33.33%';
            obstacles.forEach(obstacle => obstacle.remove());
            obstacles = [];
            scoreElement.textContent = `Score: ${score}`;
            speed = 3;
            gameInterval = setInterval(runGame, 1000 / 60);
        }

        // Main game loop
        function runGame() {
            generateObstacles();
            updateScore();
            checkCollisions();
        }

        // Start the game
        gameInterval = setInterval(runGame, 1000 / 60);
    </script>
    <button>

        hi
    
    </button>

    
</body>
</html>
